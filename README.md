![Latest Release](https://img.shields.io/github/v/release/SpellholdStudios/StuffofTheMagi?include_prereleases&color=darkred)<a name="top" id="top"> </a>
![Platform](https://img.shields.io/static/v1?label=platform&message=windows&color=informational)
![Language](https://img.shields.io/static/v1?label=language&message=English%20%7C%20French%20%7C%20Italian%20%7C%20Russian&color=limegreen)

<div align="center"><h1></a>Stuff of The Magi (WIP)</h1>

<h3>A mod hosted by Spellhold Studios for Baldur's Gate II: Throne of Bhaal (classical and EE games),
Baldur's Gate Trilogy and EET<h3>

</div><br />


**Original Author:** Victor Straffe  
**Mod Website:** <a href="http://www.shsforums.net/forum/127-mod-resurrections/">Spellhold Studios</a>  
**Mod Forum:** <a href="http://www.shsforums.net/topic/60857-stuff-ot-the-magi-updated-to-v600-with-ee-compatibility/">Stuff of The Magi</a><br>


**Note:** This mod was first released at <a href="https://sorcerers.net/Games/BG2/index_mods_hosted_items_spells2.php">Sorcerer's Place</a> and has been converted to WeiDU and officially mirrored at <a href="http://www.shsforums.net/files/category/49-mod-resurrections/">Spellhold Studios Mod Resurrections mirror</a> by <a href="http://www.shsforums.net/user/10434-kevmus/">Kevmus</a>.<br><br>


[Read the mod's readme](https://spellholdstudios.github.io/readmes/sotm-readme-english.txt) - <a href="README-FR.md">Français</a>

[Download the mod at Spellhold Studios](http://www.shsforums.net/files/file/643-stuff-of-the-magi-weidu/)<br>

&nbsp;

<div align="center">
<a href="#intro">Overview</a> &#8226; <a href="#compat">Compatibility</a> &#8226; <a href="#installation">Installation</a> &#8226; <a href="#components">Components</a> &#8226; <a href="#credits">Credits</a> &#8226; <a href="#versions">Version History</a></br>
</div>


<hr>


## <a name="intro" id="intro"></a>Overview

This mod adds a new set of Mage items scattered through the game. Please read <a href="https://spellholdstudios.github.io/sotm-spoilers.txt">sotm-spoilers.txt</a> for details.

Once you gather all the items, the one who equip them all gain an exceptional bonus. Also, if you have all items, you will meet someone in the Pocket Plane who will want to speak with you...

Note: If you choose the original overpowered items you will only end up with 7 items instead of 9, no cape nor ring.  


<details><summary><ins>Minor spoiler for lazy players!</ins></summary>
<p><br>
This mod adds the Stuff of the Magi set to the following creatures:

- Robe: Vongoethe.</br>
- Amulet: Demogorgon.</br>
- Boots: Kangaxx.</br>
- Staff: Mage (Layene) in Twisted Rune.</br>
- Bracers: Firkraag.</br>
- Circlet: Sendai.</br>
- Belt: Matron Mother Ardulace.</br>
- Cloak: Suneer in Rillifane Temple (Suldanessellar).</br>
- Ring: Lavok.
</p>
</details><br>

**Never forget:** All the original work was done by Victor Straffe at Sorcerer's Place. Kevmus updated it to WeiDU, added the more balanced items, and "bugfixed like a madman".

<hr>


## <a name="compat" id="compat"></a>Compatibility

This mod is designed to work on the following Infinity Engine games: the original Baldur's Gate II (BG2 or just SoA) with the Throne of Bhaal (ToB) expansion, Baldur's Gate II: Enhanced Edition (BG2:EE), the conversion projects <a href="http://www.shsforums.net/forum/261-bgt-weidu/">Baldur's Gate Trilogy (BGT)</a> and <a href="https://github.com/K4thos/EET/releases">Enhanced Edition Trilogy (EET)</a>.

This is a WeiDU mod, and therefore should be compatible with all WeiDU mods. If you encounter any bugs, please <a href="http://www.shsforums.net/topic/60857-stuff-ot-the-magi-updated-to-v600-with-ee-compatibility/">report them on the forum!</a><br>

>Although it is not required for the Stuff of the Magi mod to function properly, classical game players are strongly recommended to download and install the latest version of the <a href="http://www.gibberlings3.net/bg2fixpack/">BG2 Fixpack</a> before proceeding with the installation of this mod.<br>
<div align="right"><a href="#top">Back to top</a></div>


<hr>


## <a name="installation" id="installation"></a>Installation

#### Notes

*If you've previously installed the mod, remove it before extracting the new version. To do this, run **`setup-stuffofthemagi.exe`**, un-install all previously installed main component and delete the :file_folder: **stuffofthemagi** folder.*

*When installing or un-installing, **do not close the DOS window** by clicking on the **X** button! Instead, press the **Enter** key whenever instructed to do so.*

*__Disable any antivirus__ or other memory-resident software before installing this or any other mod. Some (particularly avast and Norton!) have a tendency to report false positives with mod activity, resulting in failed installs.*

## 

#### Enhanced Editions Note

The Enhanced Editions are actively supported games. Please note that every patch update will wipe your current mod setup! If in the middle of a modded game you might want to delay the patch update (if possible) as even after reinstalling the mods, you might not be able to continue with your old savegames. Alternatively, copy the whole game's folder into a new one that can be modded and will stay untouched by game patches. It is important that you install the mod to the language version you are playing the game in. Otherwise, the dialogues of the mod will not show but give error messages.

## 

#### Windows

The Stuff of the Magi mod for Windows is distributed as an extractable compressed archive and includes a WeiDU installer.

Extract the contents of the mod archive into the folder of the game you wish to modify (*the folder which contains the "CHITIN.KEY" file*), using <a href="http://www.7-zip.org/download.html">7zip</a>, <a href="http://www.rarlab.com/download.htm">WinRAR</a>, or another file compression utility that handles .zip files. On successful extraction, there should be a :file_folder: stuffofthemagi folder and a setup-stuffofthemagi.exe file in your game folder. To install, simply double-click **`setup-stuffofthemagi.exe`** and follow the instructions on screen.

Run **`setup-stuffofthemagi.exe`** in your game folder to reinstall, un-install or otherwise change the components settings.

## 

#### Mac OS X

The Stuff of the Magi mod for Mac OS X is distributed is distributed in the same compressed archive and includes a WeiDU installer.

First, extract the files from the archive into your game directory. On successful extraction, there should be a :file_folder: stuffofthemagi folder, setup-stuffofthemagi and setup-stuffofthemagi.command files in your game folder. To install, simply double-click **`setup-stuffofthemagi.command`** and follow the instructions on screen.

Run **`setup-stuffofthemagi.command`** in your game folder to reinstall, un-install or otherwise change the components settings.

## 

#### Linux

The Stuff of the Magi mod for Linux is distributed in the same compressed archive and does not include a WeiDU installer.

Extract the contents of the mod to the folder of the game you wish to modify.

Download the latest version of WeiDU for Linux from <a href="https://github.com/WeiDUorg/weidu/releases">WeiDU.org</a> and copy weidU and weinstall to /usr/bin. Following that, open a terminal, **cd** to your game installation directory, run tolower and answer 'Y' to both queries. You can avoid running the second option (linux.ini) if you've already ran it once in the same directory. To save time, the archive is already tolowered, so there's no need to run the first option (lowercasing file names) either if you've extracted only this mod since the last time you lowercased file names. If you're unsure, running tolower and choosing both options is the safe bet.

To install, run **`weinstall setup-stuffofthemagi`** in your game folder. Then run **`wine BGMain.exe`** (or **`wine Baldur.exe`** for EE games) and start playing.

## 

#### Note for Complete Un-installation

In addition to the methods above for removing individual components, you can completely un-install the mod using **`setup-stuffofthemagi --uninstall`** at the command line to remove all components without wading through prompts.</br>
<div align="right"><a href="#top">Back to top</a></div>


<hr>


## <a name="components" id="components"></a>Components

As of v6.0.0, the installer splits main component into four sub components, letting the player decide which one he/she wants to install.  
The number of each is the component DESIGNATED number which gives it a fixed install position and allows automated installers to specify component choices.<br />

## 

**0. Use new, less cheesy items AND Add them to creatures' equipment** (recommended)  
**1. Use new, less cheesy items AND Add them to creatures' inventory**  
**2. Use original, overpowered items AND Add them to creatures' equipment**  
**3. Use original, overpowered items AND Add them to creatures' inventory**  

## 

:warning: Please note that the recommended installation options are "*Use new, less cheesy items*" and "*Add them to creatures' equipment*".<br>
If you choose "*Add items to creatures' equipment*", enemies will use these items against you, while "*Add items to creature's inventory*" option, won't change difficulty of fights.

<div align="right"><a href="#top">Back to top</a></div>


<hr>


## <a name="credits" id="credits"></a>Credits and Acknowledgements

**Author:** Victor Straffe (at Sorcerer's Place)  

## 

#### Special Acknowledgements to:

- Cmorgan: Help with bug-squishing/tidiness/etc.
- Kevmus: Updated the mod to WeiDU, added the more balanced items, and fixed bugs.
- Rastamage: Item stories/Erevain's talk.
- Tassadar88: Help with coding.
- Deratiseur: Made it compatible with translations, wrote the French translation, and provided the native BG2:EE compatible version 5.
- Gwendolyne: Released version 6.0.0.
- ilot: Italian translation.
- The BiG World Textpack Russian team: Russian translation.
- Anastasya Zakharova: <a href="https://www.artstation.com/artwork/AznzX">Matatel portrait</a> for Erevain Beraskána.
- AL|EN: Wrote <a href="https://forums.beamdog.com/discussion/78364/infinity-auto-packager-automatically-generate-and-adds-mod-packages-to-release-when-you-publish-it">Infinity Auto Packager</a> tool which automatically provides Windows, Linux and Mac versions in the same archive file.

If you wish to translate the mod, have a suggestion, or should encounter any bugs, please report them to the maintainers at the <a href="http://www.shsforums.net/topic/60857-stuff-ot-the-magi-updated-to-v600-with-ee-compatibility/">mod forum</a>.</br>

## 

#### Copyrights Information

###### the Stuff of the Magi is not developed, supported, or endorsed by BioWare&trade; or Interplay/BlackIsle, Overhaul, Beamdog or the Wizards of the Coast. It was developed by Victor Straffe, based on material from the game Baldur's Gate II and its expansion.
###### All mod content is &copy;Victor Straffe and Rastamage.
###### Baldur's Gate II: Shadows of Amn and Baldur's Gate II: Throne of Bhaal &copy; TSR, Inc. The BioWare Infinity Engine is &copy; BioWare Corp. All other trademarks and copyrights are property of their respective owners.

###### This mod was created to be freely enjoyed by all Baldur's Gate II players, and its content is free of rights. However, it should not be sold, published, compiled or redistributed in any form without the consent of the author.

###### The modding community for the Infinity Engine has been going strong for more than 10 years now, and is the culmination of thousands of unpaid modding hours by fellow fans of the game. Modders produce their best work and players get the best, well-supported mods when we all work together.
###### There are two big ways to upset this harmony. One is to claim someone else's work as your own. The second is to host and redistribute a mod without permission from the author(s).
###### Be kind to your fellow players and modders. Don't do either.</br></br>
<div align="right"><a href="#top">Back to top</a></div>


<hr>


## <a name="versions" id="versions"></a>Version History

##### Version 6.0.0 (July 2, 2020)

<ins>Major updates:</ins>
- Added *stuffofthemagi.ini* metadata file to support AL|EN's "Project Infinity".
- Renamed *Setup-StuffofTheMagi.tp2* -> *stuffofthemagi.tp2* to support AL|EN's "Project Infinity".
- Replaced `AUTHOR` keyword with `SUPPORT`.
- Fixed a typo in `HANDLE_CHARSETS` function (replaced *infer_charset* with *infer_charset<ins>s</ins>*).
- Added `REQUIRE_PREDICATE` process to avoid installing the mod in inaccurate games.
- Added components `DESIGNATED` numbers and "*sotm_new_items_in_cre_equipment*", "*sotm_new_items_in_cre_inventory*", "*sotm_original_items_in_cre_equipment*" and "*sotm_original_items_in_cre_inventory*" `LABELS`.
- Replaced `READLN` actions with `SUBCOMPONENTS` to support AL|EN's "Project Infinity".
- Externalized tp2 code into "*sotm_items.tpa*" library for more comfortable readability and maintenance.
- Added "*always.tpa*" library.
- Added native EET, 1PP and ToBEx compatibility.
- Commented code as much as possible.
- Fixed wrong *ACTION.IDS* patching.
- Fixed an installation issue preventing the player wearing whole Stuff of the Magi set to gain an extra bonus if Option 2 ("*Use original, overpowered items*") was selected.
- Does not compile anymore *wzrdlich.baf* twice.
- wzrdlich.cre: moved RNDTREnn items from quick item slots to inventory.
- Provided a portrait to Erevain Beraskána.
- Updated *string.tra* files for compatibility with GW_UPDATE_ITM_DESCRIPTION_TO_EE WeiDU function requirements which automatically removes usability restrictions for EE games.
- Added foreign languages WeiDU prompts whenever possible.
- Split *setup.tra* file into separate thematic files for more comfortable readability.
- Added Italian translation (by ilot). 
- Added Russian translation (by the BiG World Textpack Russian project). 
- Updated and renamed readme files to *sotm-readme-%LANGUAGE%.txt*, then moved them into new "*readme*" folder.
- Reorganized mod architecture tree: created "*lib*" and "*readme*" folders, renamed "*script*" and "*language*" folders to "*baf*" and "*lang*" folders.
- Removed useless or unused files: wzrdlic2.baf, wzrdlichold.cre and wzrdbag.itm.
- Included Linux and Mac Os X versions in the same package (thanks AL|EN's Infinity Auto Packager tool!).
- Added archive libiconv-1.9.2-1-src.7z with iconv licence info.
- Updated WeiDU installer to v246.
- Uploaded mod to official Spellhold Studios GitHub mirror account.

<ins>Items updates:</ins>
- Hard-coded item unidentified names and descriptions in .itm files to avoid writing them in installation process.
- Added 1PP compatibility to harmonize colors item with EE games and classical 1PP modded games.
- Added *Break Sanctuary* flag whenever relevant for EE games.
- Added Detectable Spells variables whenever relevant.
- Appended tooltip.2da whenever relevant (wzrdboot, wzrdhelm and wzrdstaf).
- Fixed remaining glitches and bugs.
- <ins>Scroll Case</ins> (wzrdbag1): fixed wrong Storage capacity (made it bottomless as per its description) and fixed a typo and wrong scrolls patching (was adding 2 scrolls of Freedom instead of 1 Freedom and 1 Imprisonment).
- Option 1: "*Use new, less cheesy items*"
	- <ins>Cape of the Magi</ins> (wzrdrobe):
		- Removed useless Chain Contingency ability that did not do anything and was not described in identified description strref.
		- Replaced missing description icon CCLCK02 with CCLCK01.
		- Replaced wrong GCLCK02 ground icon (robe) with GCLCK01 (cloak).
	- <ins>Ring of the Magi</ins> (wzrdring):
		- Added missing Immune to level drain effects: op#267 Protection from Display Specific String (41495 *One Level Drained* - 40968 *Two Levels Drained* - 40969 *Three Levels Drained* - 40979 *Four Levels Drained* - 41616 *Five Levels Drained*) and op#169 Immunity Special Effect Icon (59 Energy Drain).
		- Added missing DS value: opcode #282 (Script: Scripting State Modifier): parameter1 = 1 - parameter2 = 2 [158 SCRIPTINGSTATE3 aka LEVEL_DRAIN_IMMUNITY].
		- Decided not to add opcode #142 Display portrait icon (90 : Negative Plane Protection).
	- <ins>Robe of the Magi</ins> (wzrdclck):
		- Fixed wrong weight (3 - was 2).
		- Fixed opcode #142 (Display portrait icon): replaced wrong 76 icon (Protected from the Elements) with 63 (Magic Resistance).
	- <ins>Amulet of the Magi</ins> (wzrdamul):
		- Removed all inaccurate opcodes #206 (Protection from Spell) protecting from Polymorph Other and Flesh to Stone spells with full effects granting immunity to Petrification.
		- Removed useless #142 opcodes (Display portrait icon): 63 (Magic Resistance) and 70 (Protection from Normal Weapons).
		- Added missing DS value: op#282 (Script: Scripting State Modifier: parameter1 = 1 - parameter2 = 20 [176 LOCKPICKINGMTPBONUS aka WIZARD_PROTECTION_FROM_PETRIFICATION]) for classical games and op#328 Set state (107 PROTECTION_FROM_PETRIFICATION) for EE games.
	- <ins>Boots of the Magi</ins> (wzrdboot):
		- Fixed description strref: same movement rate as Boots of Speed instead of "*Movement rate increased by 50%*", and replaced "*Aura cleansed after each spell*" with "*Improved Alacrity one per day*".
		- Fixed ability icon (SPWI921B) and replaced opcode #148 with opcode #146.
		- Appended tooltip.2da: *Improved Alacrity*.
	- <ins>Staff of the Magi</ins> (wzrdstaf):
		- Fixed wrong damages.
		- Modified opcode #20 (Invisibility) resistance: set to 3 Dispel/Bypass resistance.
		- Added missing opcodes for a full Immunity to Charm effects: op#296 Protection from Specific Animation (SPNWCHRM), op#267 (protection from string = 8364 *Dominated* - 14780 *Dire charmed* - 14672 *Charmed*). Fixed opcode #142 (Display Special Effect Icon) = replaced wrong parameter2 28 (Protection from Magic) with 52 (Mind Shield).
		- Removed ugly Protection from Evil glowing colors: Glow Pulse [9] effect
		- Added missing DS values {117 PROTECTION_FROM_EVIL].
		- Replaced Dispel magic effects with more accurate BG2 Fixpack ones.
		- Fireball-Lightning Bolt ability: added *Break Sanctuary* flag for EE games.
		- Spell trap ability: replaced with STAF11.spl.
		- Added 1PP compatibility with EE games and classical 1PP modded games: added Glowing staff animation (and colors) and harmonized colors item.
		- Appended tooltip.2da: *Staff of the Magi, Fireball-Lightning, Spell Trap*.
	- <ins>Gauntlets of the Magi</ins> (wzrdbrac):
		- Updated item description (was missing +1 Intelligence).
	- <ins>Circlet of the Magi</ins> (wzrdhelm):
		- Item description: added missing Weight (1).
		- Added missing opcodes for a full Immunity to Silence effects: op#169 (Immunity Special Effect Icon = 34 Silenced) and op#267 (protection from string = 14002 *Silence* - 14676 *Silenced*).
		- Replaced Protection from spell opcodes (#206) with full effects granting Mind Shield.
		- Added 1PP compatibility with EE games and classical 1PP modded games: added circlet animation (JB) and color.
		- Added EE and ToBEx item flag: EE/Ex: Toggle critical hits flag (BIT25).
	- <ins>Girdle of the Magi</ins> (wzrdbelt):
		- Added missing opcode #142 (Display portrait icon): 11 (Protection from Missiles).
		- Fixed wrong coding in opcodes #83: parameter1 and parameter2 were inverted.
		- Added missing Protection from normal 1PP projectiles if they exist (EE games and classical 1PP modded games): 1arow01, 1bolt01, 1dagg05, 1dart01.
		- Added missing 25% Magic resistance opcode.
		- Added missing DS values: op#282 (Script: Scripting State Modifier: parameter1 = 1 parameter2 = 23 [179 PICKPOCKETMTPBONUS aka WIZARD_PROTECTION_FROM_NORMAL_MISSILES]) for classical games and op#328 Set state (64 BUFF_PRO_WEAPONS and 109 PROTECTION_FROM_NORMAL_MISSILES) for EE games.
- Option 2: "*Use original, overpowered items*"
	- <ins>Robe of the Magi</ins> (wzrdclck):
		- Fixed wrong weight (3 - was 2).
		- Added missing DS value op#233 (Stat: Proficiency [124 EXTRAPROFICIENCY10 aka CLERIC_REGENERATION].
		- Added DS value for EE games: op#328 Set state (65 BUFF_PRO_DAMAGE).
	- <ins>Amulet of the Magi</ins> (wzrdamul):
		- Replaced Protection from Flesh to Stone spell opcodes (#206) with full effects granting immunity to Petrification.
		- Replaced all inaccurate opcodes #206 (Protection from Spell) protecting from Polymorph Other spells with a +1 bonus to Save vs. Polymorph.
		- Added missing DS value: op#282 (Script: Scripting State Modifier: parameter1 = 1 - parameter2 = 20 [176 LOCKPICKINGMTPBONUS aka WIZARD_PROTECTION_FROM_PETRIFICATION]) for classical games and op#328 Set state (107 PROTECTION_FROM_PETRIFICATION) for EE games.
		- Added missing DS values: op#282 (Script: Scripting State Modifier: parameter1 = 1 - parameter2 = 25 [181 DETECTILLUSIONSMTPBONUS aka PROTECTION_FROM_NORMAL_WEAPONS]) for classical games and op#328 Set state Set State (111 PROTECTION_FROM_NORMAL_WEAPONS and 64 BUFF_PRO_WEAPONS) for EE games.
	- <ins>Boots of the Magi</ins> (wzrdboot):
		- Added opcode #142 (Display portrait icon): 159 (Improved Alacrity).
		- Added missing DS value: op#282 (Scripting State Modifier: parameter1 = 1 - parameter2 = 9 [165 SCRIPTINGSTATE10 aka WIZARD_IMPROVED_ALACRITY].
	- <ins>Circlet of the Magi</ins> (wzrdhelm):
		- Item description: added missing Weight (1).
		- Added missing opcodes for a full Immunity to Silence effects: op#169 (Immunity Special Effect Icon = 34 Silenced) and op#267 (protection from string = 14002 *Silence* - 14676 *Silenced*).
		- Replaced Protection from spell opcodes (#206) with full effects granting Mind Shield.
		- Fixed Feeblemind ability settings (added missing icon, flags...).
		- Feeblemind ability: added *Break Sanctuary* flag for EE games.
		- Added 1PP compatibility with EE games and classical 1PP modded games: added circlet animation (JB) and color.
		- Added EE and ToBEx item flag: EE/Ex: Toggle critical hits flag (BIT25).
		- Appended tooltip.2da: *Feeblemind*.
	- <ins>Girdle of the Magi</ins> (wzrdbelt):
		- Removed useless empty ability header.
		- Added opcode #142 (Display portrait icon): 11 (Protection from Missiles).
		- Fixed wrong coding in opcodes #83: parameter1 and parameter2 were inverted.
		- Added Protection from missing vanilla magic projectiles and from missing 1PP projectiles if they exist (EE games and classical 1PP modded games).
		- Added missing DS values: op#282 (Script: Scripting State Modifier: parameter1 = 1 parameter2 = 23 [179 PICKPOCKETMTPBONUS aka WIZARD_PROTECTION_FROM_NORMAL_MISSILES]) for classical games and op#328 Set state (64 BUFF_PRO_WEAPONS and 109 PROTECTION_FROM_NORMAL_MISSILES) for EE games.

## 

##### Version 5 (August 3, 2019)

- Added native BG2EE compatibility. Thanks, Deratiseur! (again ! :wink: )
- Removed useless "*backup*" folder.

## 

##### Version 4 (May 22, 2009)

- Apparently, a version of 1.3 had gotten out into the wild labeled v3. This should remove any doubt as to which version is latest.
- Fixed: original gauntlets gave +2 ninth level spells permanently. This was also in the non-WeiDU SOTM.
- Fixed: unidentified cape had description of a belt. Oops.
- Added French translation. Thanks, Deratiseur!

## 

##### Version 2.4 (June 8, 2008)

- Fixed a bunch of bugs.

## 

##### Version 2 (June 7, 2008)

- Added balanced items, encounter in Pocket plane.

## 

##### Version 1.3 (June 3, 2008)

- Fixed the No wizard amulet from Demogorgon bug.

## 

##### Version 1.2 (June 3, 2008)

- Fixed the 2 staffs from Layene bug.

## 

##### Version 1.1 (June 3, 2008)

- Updated to WeiDU.

## 

##### Version 1 (September 11, 2002)

- Initial release.
<div align="right"><a href="#top">Back to top</a></div>
